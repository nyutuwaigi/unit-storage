{"version":3,"sources":["webpack:///src/app/pages/auth/login/login.page.html","webpack:///src/app/pages/auth/login/login-routing.module.ts","webpack:///src/app/pages/auth/login/login.module.ts","webpack:///src/app/pages/auth/login/login.page.scss","webpack:///src/app/pages/auth/login/login.page.ts"],"names":["routes","path","component","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","Device","LoginPage","formBuilder","alertCtrl","_apiService","storage","router","_gs","route","url","loginUrl","signIn","queryParams","subscribe","params","from","priviousUrl","console","log","loginForm","group","emailId","compose","required","pattern","password","options","create","header","message","buttons","alert","present","getLoginResponse","value","permissions","postRequest","res","success","settings","data","navigate","reset","presentAlert","err","navigationExtras","org","orgs","filter","x","name","length","set","token","user","profile","_id","updateTabs","orgId","id","sendData","attachFCM","getInfo","info","get","then","fcmToken","deviceId","uuid","deviceType","operatingSystem","enableNotifications","firebaseToken","addToken","result","error","selector","template"],"mappings":"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","file":"pages-auth-login-login-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons>\\r\\n      <ion-back-button color=\\\"unit-btn\\\" text=\\\"\\\" icon=\\\"chevron-back-outline\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content fullscreen class=\\\"ion-padding\\\">\\r\\n  <div class=\\\"logo\\\">\\r\\n    <img _ngcontent-cmb-c7=\\\"\\\" src=\\\"../../../../assets/imgs/logo.png\\\">\\r\\n  </div>\\r\\n  <ion-grid fixed style=\\\"height: 40%;\\\">\\r\\n    <ion-row class=\\\"ion-justify-content-center ion-align-items-center\\\" style=\\\"height: 80%;\\\">\\r\\n      <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\r\\n        <form class=\\\"form\\\" [formGroup]=\\\"loginForm\\\" *ngIf=\\\"!passwordInput\\\">\\r\\n          <ion-list class=\\\"line-input\\\" mode=\\\"md\\\">\\r\\n            <ion-item mode=\\\"md\\\">\\r\\n\\r\\n              <div class=\\\"left-icon\\\">\\r\\n                <img src=\\\"../../../../assets/imgs/awesome-user-edit.png\\\">\\r\\n              </div>\\r\\n              <ion-input class=\\\"ion-text-left\\\" id=\\\"email\\\" placeholder=\\\"Email Address\\\" type=\\\"email\\\" formControlName=\\\"emailId\\\"></ion-input>\\r\\n            </ion-item>\\r\\n          </ion-list>\\r\\n          <ion-list class=\\\"line-input\\\" mode=\\\"md\\\">\\r\\n            <ion-item mode=\\\"md\\\">\\r\\n              <div class=\\\"left-icon\\\">\\r\\n                <img src=\\\"../../../../assets/imgs/ionic-ios-lock.png\\\">\\r\\n              </div>\\r\\n              <ion-input class=\\\"ion-text-left\\\" id=\\\"pass\\\" type=\\\"password\\\" placeholder=\\\"Password\\\" formControlName=\\\"password\\\"></ion-input>\\r\\n            </ion-item>\\r\\n          </ion-list>\\r\\n          <ion-grid>\\r\\n            <ion-row>\\r\\n              <ion-col size=\\\"15\\\" size-lg offset=\\\"3\\\" class=\\\"ion-align-self-end\\\">\\r\\n                <p class=\\\"forgot-pass\\\">\\r\\n                  <a routerLink=\\\"/forgot-password\\\">Forgot Password?</a>\\r\\n                </p>\\r\\n              </ion-col>\\r\\n            </ion-row>\\r\\n          </ion-grid>\\r\\n        </form>\\r\\n        <ion-button class=\\\"button-h\\\" *ngIf=\\\"!passwordInput\\\" fill=\\\"solid\\\" size=\\\"default\\\" shape=\\\"round\\\" expand=\\\"block\\\"\\r\\n          color=\\\"unit-btn\\\" [disabled]=\\\"!loginForm.valid\\\" (click)=\\\"login()\\\">\\r\\n          Login\\r\\n        </ion-button>\\r\\n        <p class=\\\"have\\\">\\r\\n          Don't have an account? <br>\\r\\n          <a routerLink=\\\"/phone-verification\\\" class=\\\"signup-text\\\"> Sign up </a>\\r\\n        </p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","export default \".logo {\\n  margin: auto;\\n  width: 25%;\\n  margin-top: 10%;\\n}\\n\\nb {\\n  font-weight: 500;\\n}\\n\\n.forgot-pass {\\n  text-decoration: none;\\n  margin-right: 6px;\\n  font-size: 13px;\\n  font-family: 'medium';\\n  color: var(--ion-color-step-600, #60646b);\\n}\\n\\n.forgot-pass a {\\n  text-decoration: none;\\n}\\n\\np {\\n  padding: 0 40px;\\n  font-size: 14px;\\n  line-height: 1.5;\\n  color: var(--ion-color-step-600, #60646b);\\n}\\n\\nion-label {\\n  color: #656565 !important;\\n  font-size: 17px !important;\\n}\\n\\nform {\\n  margin-top: 15%;\\n}\\n\\n.cancel {\\n  margin-right: 5px;\\n  font-size: x-large;\\n}\\n\\n.line-input {\\n  margin-bottom: 0 !important;\\n}\\n\\n.line-input ion-item {\\n  --border-color: transparent !important;\\n  --background-activated: white;\\n  --background-focused: white;\\n  --background-hover: white;\\n  --highlight-height: 0;\\n  border: 1px solid #cdcfcf;\\n  border-radius: 50px;\\n  color: #707070;\\n  height: 45px;\\n}\\n\\n.line-input ion-item.item-has-focus {\\n  border: 1px solid #CDCFCF;\\n}\\n\\n.line-input ion-item ion-label {\\n  color: #807e7e !important;\\n  font-weight: 300;\\n  font-size: 14px !important;\\n}\\n\\n.line-input ion-item ion-icon {\\n  color: #807e7e !important;\\n  margin-right: 8px !important;\\n}\\n\\nion-input {\\n  --placeholder-color: #9B9B9B;\\n  --placeholder-opacity: 1;\\n  font-family: medium;\\n  margin-left: 7px;\\n}\\n\\n.sc-ion-input-md-h {\\n  --padding-top: 7px !important;\\n}\\n\\n.sc-ion-input-ios-h {\\n  font-size: 14px !important;\\n}\\n\\na {\\n  color: #ED1B25;\\n}\\n\\n.signup-text {\\n  font-size: 17px;\\n  font-family: medium;\\n}\\n\\nion-button {\\n  text-transform: capitalize;\\n  height: 44px;\\n  font-size: 16px;\\n  margin: 0 !important;\\n  margin-top: 40px !important;\\n  font-family: helveticaneuebold;\\n}\\n\\n.have {\\n  font-family: medium;\\n  color: #8E8E8E;\\n  font-size: 17px;\\n  line-height: 20px;\\n  margin-top: 25px;\\n  line-height: 20px;\\n}\\n\\n#email {\\n  caret-color: red;\\n}\\n\\n#pass {\\n  caret-color: red;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvYXV0aC9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxZQUFZO0VBQ1osVUFBVTtFQUNWLGVBQWU7QUFDbkI7O0FBRUU7RUFDRSxnQkFBZ0I7QUFDcEI7O0FBQ0U7RUFDRSxxQkFBcUI7RUFDbkIsaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixxQkFBcUI7RUFDdkIseUNBQXlDO0FBRTdDOztBQVBFO0VBT0kscUJBQXFCO0FBSTNCOztBQURFO0VBQ0UsZUFBZTtFQUNmLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIseUNBQXlDO0FBSTdDOztBQURFO0VBQ0UseUJBQXlCO0VBQ3pCLDBCQUEwQjtBQUk5Qjs7QUFGRTtFQUNFLGVBQWU7QUFLbkI7O0FBRkU7RUFDRSxpQkFBaUI7RUFDakIsa0JBQWtCO0FBS3RCOztBQUZFO0VBQ0UsMkJBQTJCO0FBSy9COztBQU5FO0VBR0ksc0NBQWU7RUFDZiw2QkFBdUI7RUFDdkIsMkJBQXFCO0VBQ3JCLHlCQUFtQjtFQUNuQixxQkFBbUI7RUFDbkIseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixjQUFjO0VBQ2QsWUFBWTtBQU9sQjs7QUFsQkU7RUFhTSx5QkFBeUI7QUFTakM7O0FBdEJFO0VBaUJNLHlCQUF5QjtFQUN6QixnQkFBZ0I7RUFDaEIsMEJBQTBCO0FBU2xDOztBQTVCRTtFQXVCTSx5QkFBeUI7RUFDekIsNEJBQTRCO0FBU3BDOztBQUxFO0VBQ0UsNEJBQW9CO0VBQ3BCLHdCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIsZ0JBQWdCO0FBUXBCOztBQU5FO0VBQ0UsNkJBQWM7QUFTbEI7O0FBUEU7RUFDRSwwQkFBMEI7QUFVOUI7O0FBUEU7RUFDQyxjQUFjO0FBVWpCOztBQVBFO0VBQ0UsZUFBZTtFQUNmLG1CQUFtQjtBQVV2Qjs7QUFSRTtFQUNFLDBCQUEwQjtFQUMxQixZQUFZO0VBQ1osZUFBZTtFQUNmLG9CQUFvQjtFQUNwQiwyQkFBMkI7RUFDM0IsOEJBQThCO0FBV2xDOztBQVRFO0VBQ0UsbUJBQW1CO0VBQ25CLGNBQWM7RUFDZCxlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGdCQUFnQjtFQUNoQixpQkFBaUI7QUFZckI7O0FBVkU7RUFDRSxnQkFBZ0I7QUFhcEI7O0FBWEU7RUFDRSxnQkFBZ0I7QUFjcEIiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9hdXRoL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sb2dve1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgd2lkdGg6IDI1JTtcclxuICAgIG1hcmdpbi10b3A6IDEwJTtcclxuICB9XHJcbiAgXHJcbiAgYiB7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG4gIH1cclxuICAuZm9yZ290LXBhc3Mge1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gICAgICBtYXJnaW4tcmlnaHQ6IDZweDtcclxuICAgICAgZm9udC1zaXplOiAxM3B4O1xyXG4gICAgICBmb250LWZhbWlseTogJ21lZGl1bSc7XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXN0ZXAtNjAwLCAjNjA2NDZiKTtcclxuICAgIGF7XHJcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIH1cclxuICB9XHJcbiAgcCB7XHJcbiAgICBwYWRkaW5nOiAwIDQwcHg7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICBsaW5lLWhlaWdodDogMS41O1xyXG4gICAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1zdGVwLTYwMCwgIzYwNjQ2Yik7XHJcbiAgfVxyXG4gIFxyXG4gIGlvbi1sYWJlbCB7XHJcbiAgICBjb2xvcjogIzY1NjU2NSAhaW1wb3J0YW50O1xyXG4gICAgZm9udC1zaXplOiAxN3B4ICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG4gIGZvcm0ge1xyXG4gICAgbWFyZ2luLXRvcDogMTUlO1xyXG4gIH1cclxuICBcclxuICAuY2FuY2VsIHtcclxuICAgIG1hcmdpbi1yaWdodDogNXB4O1xyXG4gICAgZm9udC1zaXplOiB4LWxhcmdlO1xyXG4gIH1cclxuICBcclxuICAubGluZS1pbnB1dCB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAwICFpbXBvcnRhbnQ7XHJcbiAgICBpb24taXRlbSB7XHJcbiAgICAgIC0tYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50O1xyXG4gICAgICAtLWJhY2tncm91bmQtYWN0aXZhdGVkOiB3aGl0ZTtcclxuICAgICAgLS1iYWNrZ3JvdW5kLWZvY3VzZWQ6IHdoaXRlO1xyXG4gICAgICAtLWJhY2tncm91bmQtaG92ZXI6IHdoaXRlO1xyXG4gICAgICAtLWhpZ2hsaWdodC1oZWlnaHQ6IDA7XHJcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjZGNmY2Y7XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDUwcHg7XHJcbiAgICAgIGNvbG9yOiAjNzA3MDcwO1xyXG4gICAgICBoZWlnaHQ6IDQ1cHg7XHJcbiAgICAgICYuaXRlbS1oYXMtZm9jdXMge1xyXG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNDRENGQ0Y7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgaW9uLWxhYmVsIHtcclxuICAgICAgICBjb2xvcjogIzgwN2U3ZSAhaW1wb3J0YW50O1xyXG4gICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XHJcbiAgICAgICAgZm9udC1zaXplOiAxNHB4ICFpbXBvcnRhbnQ7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgaW9uLWljb24ge1xyXG4gICAgICAgIGNvbG9yOiAjODA3ZTdlICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA4cHggIWltcG9ydGFudDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBpb24taW5wdXR7XHJcbiAgICAtLXBsYWNlaG9sZGVyLWNvbG9yOiAjOUI5QjlCO1xyXG4gICAgLS1wbGFjZWhvbGRlci1vcGFjaXR5OiAxO1xyXG4gICAgZm9udC1mYW1pbHk6IG1lZGl1bTtcclxuICAgIG1hcmdpbi1sZWZ0OiA3cHg7XHJcbiAgfVxyXG4gIC5zYy1pb24taW5wdXQtbWQtaHtcclxuICAgIC0tcGFkZGluZy10b3A6IDdweCAhaW1wb3J0YW50O1xyXG4gIH1cclxuICAuc2MtaW9uLWlucHV0LWlvcy1oIHtcclxuICAgIGZvbnQtc2l6ZTogMTRweCAhaW1wb3J0YW50O1xyXG4gIH1cclxuICBcclxuICBhe1xyXG4gICBjb2xvcjogI0VEMUIyNTtcclxuICBcclxuICB9XHJcbiAgLnNpZ251cC10ZXh0e1xyXG4gICAgZm9udC1zaXplOiAxN3B4O1xyXG4gICAgZm9udC1mYW1pbHk6IG1lZGl1bTtcclxuICB9XHJcbiAgaW9uLWJ1dHRvbntcclxuICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xyXG4gICAgaGVpZ2h0OiA0NHB4O1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XHJcbiAgICBtYXJnaW4tdG9wOiA0MHB4ICFpbXBvcnRhbnQ7XHJcbiAgICBmb250LWZhbWlseTogaGVsdmV0aWNhbmV1ZWJvbGQ7XHJcbiAgfVxyXG4gIC5oYXZle1xyXG4gICAgZm9udC1mYW1pbHk6IG1lZGl1bTtcclxuICAgIGNvbG9yOiAjOEU4RThFO1xyXG4gICAgZm9udC1zaXplOiAxN3B4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDIwcHg7XHJcbiAgICBtYXJnaW4tdG9wOiAyNXB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDIwcHg7XHJcbiAgfVxyXG4gICNlbWFpbHtcclxuICAgIGNhcmV0LWNvbG9yOiByZWQ7XHJcbiAgfVxyXG4gICNwYXNze1xyXG4gICAgY2FyZXQtY29sb3I6IHJlZDtcclxuICB9Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  FormGroup,\r\n  FormBuilder,\r\n  FormControl,\r\n  Validators,\r\n} from \"@angular/forms\";\r\nimport { AlertController } from '@ionic/angular';\r\nimport { ApiService } from 'src/app/services/api-service.service';\r\nimport { config, UNITURL, URL} from '../../config/config';\r\nimport { Storage } from '@ionic/storage';\r\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\r\nimport { GlobalService } from 'src/app/services/global.service';\r\nimport {\r\n  Plugins\r\n} from '@capacitor/core';\r\n\r\nconst { Device } = Plugins;\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  private loginForm: FormGroup;\r\n  private url: any = config.url;\r\n  private  loginUrl = URL.signIn;\r\n  priviousUrl: any;\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private alertCtrl : AlertController,\r\n    private _apiService: ApiService,\r\n    private storage: Storage,\r\n    private router: Router,\r\n    private _gs : GlobalService,\r\n    private route: ActivatedRoute\r\n    ) {\r\n\r\n      this.route.queryParams.subscribe((params) => {\r\n        if (params && params.from) {\r\n          this.priviousUrl = params.from;\r\n          console.log( this.priviousUrl );\r\n        }\r\n      });\r\n\r\n    this.loginForm = this.formBuilder.group({\r\n      emailId: new FormControl(\r\n        \"\",\r\n        Validators.compose([\r\n          Validators.required,\r\n          Validators.pattern(\"^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$\"),\r\n        ])\r\n      ),\r\n      password: new FormControl(\"\", Validators.required),\r\n    });\r\n   }\r\n\r\n \r\n  ngOnInit() {}\r\n\r\n  async presentAlert(options) {\r\n    const alert = await this.alertCtrl.create({\r\n      header: options.header ? options.header : 'Alert',\r\n      message: options.message ? options.message : '',\r\n      buttons: options.buttons\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  login() {\r\n    this.getLoginResponse();\r\n  }\r\n  getLoginResponse() {\r\n    console.log(this.url + this.loginUrl);\r\n    if(this.loginForm.value){\r\n      this.loginForm.value.permissions = true;\r\n    }\r\n    this._apiService\r\n      .postRequest(this.url + this.loginUrl, this.loginForm.value)\r\n      .subscribe(async (res) => {\r\n        if (res.success) {\r\n          this.settings(res.data);\r\n          this.navigate();\r\n          this.loginForm.reset();\r\n        } else {\r\n          this.presentAlert({ header: \"Error\", message: res.message, buttons: [\"Dismiss\"] });\r\n        }\r\n      }, (err) => {\r\n        this.presentAlert({ header: \"Error\", message: \"Unable to process your request. Please try again later\", buttons: [\"Dismiss\"] });\r\n      });\r\n  }\r\n  navigate() {\r\n      if(this.priviousUrl == 'place-detail'){\r\n        let navigationExtras: NavigationExtras = {\r\n          queryParams: {\r\n            from: \"place-detail\"\r\n          },\r\n        };\r\n        this.router.navigate([this.priviousUrl], navigationExtras);\r\n      }else{\r\n        this.router.navigate([this.priviousUrl]);\r\n      }\r\n      if(!this.priviousUrl){\r\n        this.router.navigate([\"tabs/tab1\"]);\r\n      }\r\n  }\r\n  \r\n  settings(data: any) {\r\n    let org = data.orgs.filter(x => x.name == \"Unit\" || x.name == 'unit');\r\n    if(org.length){\r\n      this.storage.set(\"permissions\", org[0].permissions);\r\n    }\r\n    this.storage.set(\"session\", data.token);\r\n    this.storage.set(\"user\", data.user.profile);\r\n    this.storage.set(\"loggedUserId\",data.user._id);\r\n    this._gs.updateTabs({\r\n      orgId : org[0].id,\r\n      token: data.token,\r\n      permissions : org[0].permissions\r\n    });\r\n    this._gs.sendData(data.user.profile);\r\n    this.storage.set(\"org\", org[0].id);\r\n    \r\n    this.attachFCM(data.token);\r\n  }\r\n  async attachFCM(token) {\r\n    const info = await Device.getInfo();\r\n    this.storage.get('fcm_token').then((fcmToken) => {\r\n      if(fcmToken){\r\n        const params = {\r\n          deviceId : info.uuid,\r\n          token : token,\r\n          deviceType: info.operatingSystem,\r\n          enableNotifications : true,\r\n          firebaseToken : fcmToken\r\n        };\r\n        this._apiService.postRequest(this.url + UNITURL.addToken,params).subscribe(\r\n          async (result) => {\r\n            console.log(result);\r\n          }, (error) => {\r\n            console.log('error', error)\r\n          }\r\n        )\r\n      }\r\n    });\r\n  }\r\n}\r\n"]}