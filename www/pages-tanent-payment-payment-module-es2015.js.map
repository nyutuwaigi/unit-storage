{"version":3,"sources":["./src/app/pages/tanent/payment/payment.page.html","./src/app/pages/tanent/payment/payment-routing.module.ts","./src/app/pages/tanent/payment/payment.module.ts","./src/app/pages/tanent/payment/payment.page.scss","./src/app/pages/tanent/payment/payment.page.ts"],"names":[],"mappings":"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","file":"pages-tanent-payment-payment-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Cards</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button color=\\\"unit-btn\\\" text=\\\"\\\" icon=\\\"chevron-back-outline\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-buttons slot=\\\"end\\\" (click)=\\\"newCard()\\\">\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <form [formGroup]=\\\"paymentForm\\\" #f=\\\"ngForm\\\">\\r\\n    <ion-list>\\r\\n      <ion-list-header>\\r\\n        Enter Card Details\\r\\n      </ion-list-header>\\r\\n      <ion-card>\\r\\n      <ion-item>\\r\\n          <ion-label position=\\\"stacked\\\">Card Number </ion-label>\\r\\n          <ion-input type=\\\"text\\\" formControlName=\\\"cardNumber\\\" maxlength=\\\"16\\\" (keypress)=\\\"onKey($event)\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">Date</ion-label>\\r\\n            <ion-datetime displayFormat=\\\"MM/YYYY\\\" pickerFormat=\\\"MM/YYYY\\\" formControlName=\\\"cardExpiration\\\" max=\\\"2050\\\">\\r\\n            </ion-datetime>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"stacked\\\">CVV</ion-label>\\r\\n            <ion-input type=\\\"text\\\" formControlName=\\\"cardCvv\\\" maxlength=\\\"3\\\" (keypress)=\\\"onKey($event)\\\"></ion-input>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      </ion-card>\\r\\n    </ion-list>\\r\\n    <div class=\\\"ion-padding\\\">\\r\\n      <ion-button  expand=\\\"block\\\"  color=\\\"unit-btn\\\" [disabled]=\\\"paymentForm.invalid\\\"\\r\\n        (click)=\\\"confirmPayment(f.value)\\\"> Add Card</ion-button>\\r\\n    </div>\\r\\n  </form>\\r\\n  <div *ngIf=\\\"cards.length != 0\\\">\\r\\n    <ion-list *ngFor=\\\"let card of cards;let i=index\\\">\\r\\n      <ion-item  detail=false>\\r\\n        <ion-label>\\r\\n          Card Number\\r\\n          <ion-input style=\\\"font-size: smaller\\\" disabled = \\\"true\\\">{{ card.payment.creditCard.cardNumber}}</ion-input>\\r\\n        </ion-label>\\r\\n        <ion-icon slot=\\\"end\\\"  color=\\\"danger\\\" name=\\\"trash-outline\\\" (click)=\\\"delete(card,i)\\\"></ion-icon>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n  </div>\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { PaymentPage } from './payment.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PaymentPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PaymentPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule,ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PaymentPageRoutingModule } from './payment-routing.module';\r\n\r\nimport { PaymentPage } from './payment.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    PaymentPageRoutingModule\r\n  ],\r\n  declarations: [PaymentPage]\r\n})\r\nexport class PaymentPageModule {}\r\n","export default \"ion-list ion-list-header {\\n  font-size: 16px;\\n  color: \\\"quaternary\\\";\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdGFuZW50L3BheW1lbnQvcGF5bWVudC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFUSxlQUFlO0VBQ2YsbUJBQW1CO0FBQTNCIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdGFuZW50L3BheW1lbnQvcGF5bWVudC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tbGlzdHtcclxuICAgIGlvbi1saXN0LWhlYWRlcntcclxuICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgY29sb3I6IFwicXVhdGVybmFyeVwiO1xyXG4gICAgfVxyXG59Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { AlertController } from '@ionic/angular';\r\nimport * as moment from 'moment';\r\nimport { ApiService } from 'src/app/services/api-service.service';\r\nimport { LoaderService } from 'src/app/services/loader.service';\r\nimport { ToastService } from 'src/app/services/toast.service';\r\nimport { config, UNITURL } from '../../config/config';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n@Component({\r\n  selector: 'app-payment',\r\n  templateUrl: './payment.page.html',\r\n  styleUrls: ['./payment.page.scss'],\r\n})\r\nexport class PaymentPage implements OnInit {\r\n\r\n  public cards: any = [];\r\n  public paymentForm: FormGroup;\r\n  url: any = config.url;\r\n  showAddCard: Boolean = false;\r\n  token: any;\r\n  orgId: any;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private api: ApiService,\r\n    private loader: LoaderService,\r\n    private _toast : ToastService,\r\n    public alertController: AlertController,\r\n    private storage : Storage\r\n    ) {\r\n    this.paymentForm = this.formBuilder.group({\r\n      cardNumber: ['', Validators.compose([Validators.required])],\r\n      cardExpiration: ['', Validators.compose([Validators.required])],\r\n      cardCvv: ['', Validators.compose([Validators.required])]\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getUserData();\r\n  }\r\n\r\n\r\n  getUserData() {\r\n    this.storage.get(\"session\").then((session) => {\r\n      if (session) {\r\n        this.storage.get(\"org\").then((org) =>{\r\n          if(org){\r\n            this.token = session;\r\n            this.orgId = org;\r\n            this.getPaymentProfile();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n  \r\n  }\r\n\r\n  onKey(e) {\r\n    const charCode = e.which ? e.which : e.keyCode;\r\n    if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  changeformat(date) {\r\n    const d = new Date(date);\r\n    return moment(d).format('MMYY');\r\n  }\r\n\r\n  getPaymentProfile() {\r\n    this.loader.present();\r\n    if (this.token) {\r\n        const params = {\r\n          token: this.token,\r\n          orgId : this.orgId\r\n        }\r\n        this.api.postRequest(this.url + UNITURL.getCustomerProfile,\r\n          params).subscribe(\r\n            async (result) => {\r\n              this.loader.dismiss();\r\n              if (result.success) {\r\n                console.log(result);\r\n                this.cards = result.data.Customer_profile.message.response.profile.paymentProfiles;\r\n\r\n                if (this.cards.length == 0){\r\n                  this.showAddCard = true;\r\n                }else{\r\n                  this.showAddCard = false;\r\n                }\r\n                console.log(this.cards);\r\n              } else {\r\n                console.log(result.message);\r\n              }\r\n            }\r\n          ), (error) => {\r\n            this.loader.dismiss();\r\n            console.log('error', error)\r\n          }\r\n    }\r\n\r\n  }\r\n  async delete(card){\r\n    console.log('@@', card);\r\n    const alert = await this.alertController.create({\r\n      header: 'Delete',\r\n      message: 'Are you sure that you want to delete this card?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (blah) => { }\r\n        }, {\r\n          text: 'Ok',\r\n          handler: () => {\r\n            this.deleteCard(card);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n  deleteCard(card) {\r\n    this.loader.present();\r\n    if (this.token) {\r\n        const params = {\r\n          token: this.token,\r\n          orgId : this.orgId\r\n        }\r\n        this.api.postRequest(this.url + UNITURL.deleteCustomerProfile,\r\n          params).subscribe(\r\n            async (result) => {\r\n              this.loader.dismiss();\r\n              if (result.success) {\r\n                this.cards = this.cards.filter(x => x.customerPaymentProfileId != x.customerPaymentProfileId);\r\n              }\r\n            }), (error) => {\r\n            this.loader.dismiss();\r\n            console.log('error', error)\r\n          }\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}